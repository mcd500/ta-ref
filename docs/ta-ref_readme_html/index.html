<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TA-REF: Overview of Trusted Application Reference (TA-Ref)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">TA-REF
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Overview of Trusted Application Reference (TA-Ref) </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p ><a class="anchor" id="md_ta_ref_docs_overview_of_ta_ref"></a> The TEE is a feature of having capability of running software from an isolated area assisted by CPU hardware.</p>
<p >Many recent devices are able to be customized by installing softwares from end users, dealers and security service companies which are different entities from the device vendors, for example, smart phones, Android TVs, set top boxes. infotainment system on cars, surveillance cameras, home security gateways, edge routers, network equipment, and etc. In this situation, malicious software could be installed on a regular operating system, such as Linux.</p>
<p >The TEE provides a secure software runtime environment for the security sensitive software from preventing interference on customizable devices of softwares running on a normal operating system.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Features of TA-Ref</h1>
<ul>
<li>Provides Portable API and SDK among Intel SGX, ARM TrustZone-A and RISC-V Keystone</li>
<li>Provides portability for source codes of Trusted Applications among SGX, TrustZone and Keystone</li>
<li>Provides subset of Global Platform API on TEE</li>
<li>Tutorial programs of common usage of hash functions, symmetric algorithm and asymmetric algorithm</li>
<li>Simple Makefiles to develop TAs on different CPUs which traditionally tend to have complex build systems</li>
</ul>
<h2><a class="anchor" id="autotoc_md2"></a>
Assumption of hardware features of TA-Ref on TEE</h2>
<div class="image">
<img src="Hardware_Features_for_TA-Ref.png" alt=""/>
</div>
 <p >The Secure Time Clock is the date and time clock hardware peripheral which updates monotonically provided separately from regular clock peripheral so the user application and OS on REE could not change the date and/or time. Many certificates of CA, license keys of purchased serial code, hardware enablement keys such as increasing the battery size of the electric cars are bound to the date. The easiest way for end users or attackers phishing the CAs and web sites, using the software and enabling the optional hardware feature without the payment is to change the value of the clock. The concrete date and time is especially important for the telemetry data.</p>
<p >The Secure Storage will be saving the cryptographic keys, Trusted Application binaries, personalization data, telemetry data, and etc, which are security sensitive files must not be tampered by any applications on the REE side. The size of the storage is typically in the order of megabytes to fulfill the required files.</p>
<p >The Random Generator is another requirement of the hardware ensuring the security level of the system. Quality of the random value is very important for having a good security level on many cryptographic algorithms used inside TEE. It is recommended to have an equivalent level of SP 800-90B and FIPS 140-3.</p>
<p >The Cryptographic Hardware accelerators are not strictly mandatory hardware features, however, it is essential to have them to be usable devices to prevent or expose the very slow usability.</p>
<h1><a class="anchor" id="autotoc_md3"></a>
Components of TA-Ref</h1>
<h2><a class="anchor" id="autotoc_md4"></a>
TA-Ref Components on Keystone</h2>
<div class="image">
<img src="Ta-ref_components_on_Keystone.png" alt=""/>
</div>
 <p >TA-Ref provides a portable TEE programming environment over the Keystone project on RISC-V RV64GC CPU. Each TA in the Trusted Aria is protected with Physical memory protection (PMP) which is enabled by RISC-V hardware.</p>
<ul>
<li>Keystone project<ul>
<li><a href="https://keystone-enclave.org/">https://keystone-enclave.org/</a></li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md5"></a>
TA-Ref Components on OP-TEE</h2>
<div class="image">
<img src="Ta-ref_components_on_Optee.png" alt=""/>
</div>
 <p >It is on OP-TEE and highly utilizing the programming environment provided by TA-Ref to simplify developing of Trusted Applications to be able to build and function on other CPUs with the single source code.</p>
<h2><a class="anchor" id="autotoc_md6"></a>
TA-Ref Components on SGX</h2>
<div class="image">
<img src="Ta-ref_components_on_SGX.png" alt=""/>
</div>
 <p >The diagram shows implementation of TA-Ref and Trusted Applications on SGX. Unlike ARM Cortex-A or RISC-V, the TEE security level is implemented vertically in the user space. The TA-Ref provides the same programming environment of ARM Cortex-A or RISC-V on Intel with the capability subset of Global Platform TEE Internal APIs.</p>
<h1><a class="anchor" id="autotoc_md7"></a>
What we did on RISC-V</h1>
<ul>
<li>We designed the GP internal API library to be portable.</li>
<li>Keystone SDK is utilized because of runtime "Eyrie".</li>
<li>The library is ported to Intel SGX as well as RISC-V Keystone.</li>
</ul>
<h2><a class="anchor" id="autotoc_md8"></a>
Challenges faced during Implementation</h2>
<ul>
<li>The combination of GP internal API and cipher suite is big.<ul>
<li>To reduce the size, We pick up some important GP internal APIs.</li>
</ul>
</li>
<li>Some APIs depend on CPU architecture.<ul>
<li>We separate APIs into CPU architecture dependent / independent.</li>
</ul>
</li>
<li>Integrate GP TEE Internal API to Keystone SDK.<ul>
<li>Keystone SDK includes EDL (Enclave Definition Language) named “keedger”.</li>
<li>Keedger creates the code for OCALL (request from TEE to REE) to check the pointer and boundary.</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md9"></a>
Selected GP TEE Internal API's for testing</h2>
<ul>
<li>CPU architecture dependent<ul>
<li>Random Generator, Time, Secure Storage, Transient Object(TEE_GenerateKey)</li>
</ul>
</li>
<li>CPU architecture independent(Crypto)<ul>
<li>Transient Object(exclude TEE_GenerateKey), Crypto Common, Authenticated Encryption, Symmetric/Asymmetric Cipher, Message Digest</li>
</ul>
</li>
</ul>
<p >Following shows the table of CPU Dependent and Independent API's with its functions.</p>
<div class="image">
<img src="separate-gp-tee-internal-api.png" alt=""/>
</div>
 <h1><a class="anchor" id="autotoc_md10"></a>
Dependency of category</h1>
<div class="image">
<img src="dependency_category.png" alt=""/>
</div>
  </div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
